{"ast":null,"code":"import _objectSpread from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Favorites.js\";\nimport React, { Component, createContext } from \"react\";\nimport axios from \"axios\";\nexport var FavoritesContext = createContext();\nvar favoritesUrl = \"/api/tabs\";\n\nvar Favorites =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Favorites, _Component);\n\n  function Favorites() {\n    var _this;\n\n    _classCallCheck(this, Favorites);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Favorites).call(this));\n    _this.state = {\n      loading: true,\n      err: null,\n      favorites: []\n    };\n    _this.handleChecked = _this.handleChecked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteFavorite = _this.deleteFavorite.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.addToFavorites = _this.addToFavorites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Favorites, [{\n    key: \"addToFavorites\",\n    value: function addToFavorites(newFavorites) {\n      this.setState(function (prevState) {\n        return {\n          favorites: _toConsumableArray(prevState.favorites).concat(_toConsumableArray(newFavorites))\n        };\n      });\n    }\n  }, {\n    key: \"_getFavoritesData\",\n    value: function _getFavoritesData(url) {\n      return axios.get(url).then(function (response) {\n        return response.data;\n      });\n    }\n  }, {\n    key: \"_handleFavoritesData\",\n    value: function _handleFavoritesData() {\n      return this._getFavoritesData(favoritesUrl).then(function (favorites) {\n        return _toConsumableArray(favorites);\n      });\n    }\n  }, {\n    key: \"handleChecked\",\n    value: function handleChecked(id) {\n      var _this2 = this;\n\n      return function (e) {\n        _this2.setState(function (_ref) {\n          var favorites = _ref.favorites;\n          return {\n            favorites: favorites.map(function (song) {\n              return song._id == id ? _objectSpread({}, song, {\n                selected: !song.selected\n              }) : song;\n            })\n          };\n        });\n      };\n    }\n  }, {\n    key: \"deleteFavorite\",\n    value: function deleteFavorite() {\n      var selectedSongs = this.state.favorites.filter(function (song) {\n        return song.selected;\n      });\n      var deletes = selectedSongs.map(function (song) {\n        axios.delete(\"/api/tabs/\".concat(song._id)).then(function (response) {\n          console.log(response);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      });\n      Promise.all(deletes).then(function (response) {\n        return console.log(response);\n      }).then(this.state); // Promise.all(deletes)\n      // .then(response => response.map(res => res.favorites))\n      // .then(this.favorites)\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this._handleFavoritesData().then(function (favorites) {\n        return _this3.setState({\n          loading: false,\n          err: null,\n          favorites: favorites\n        });\n      }).catch(function (err) {\n        return _this3.setState({\n          err: err\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = _objectSpread({}, this.state, {\n        handleChecked: this.handleChecked,\n        deleteFavorite: this.deleteFavorite,\n        addToFavorites: this.addToFavorites\n      });\n\n      return React.createElement(FavoritesContext.Provider, {\n        value: props,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return Favorites;\n}(Component);\n\nexport { Favorites as default };\nexport var withFavoritesContext = function withFavoritesContext(Comp) {\n  return function (props) {\n    return React.createElement(FavoritesContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, function (value) {\n      return React.createElement(Comp, Object.assign({}, value, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Favorites.js"],"names":["React","Component","createContext","axios","FavoritesContext","favoritesUrl","Favorites","state","loading","err","favorites","handleChecked","bind","deleteFavorite","addToFavorites","newFavorites","setState","prevState","url","get","then","response","data","_getFavoritesData","id","e","map","song","_id","selected","selectedSongs","filter","deletes","delete","console","log","catch","Promise","all","_handleFavoritesData","props","children","withFavoritesContext","Comp","value"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from \"react\";\nimport axios from \"axios\";\n\nexport const FavoritesContext = createContext();\nconst favoritesUrl = \"/api/tabs\";\n\nexport default class Favorites extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      err: null,\n      favorites: []\n    };\n    this.handleChecked = this.handleChecked.bind(this);\n    this.deleteFavorite = this.deleteFavorite.bind(this);\n    this.addToFavorites = this.addToFavorites.bind(this);\n  }\n\n  addToFavorites(newFavorites) {\n    this.setState(prevState => ({\n      favorites: [...prevState.favorites, ...newFavorites]\n    }));\n  }\n\n  _getFavoritesData(url) {\n    return axios.get(url).then(response => response.data);\n  }\n  _handleFavoritesData() {\n    return this._getFavoritesData(favoritesUrl).then(favorites => [\n      ...favorites\n    ]);\n  }\n  handleChecked(id) {\n    return e => {\n      this.setState(({ favorites }) => ({\n        favorites: favorites.map(\n          song =>\n            song._id == id ? { ...song, selected: !song.selected } : song\n        )\n      }));\n    };\n  }\n  deleteFavorite() {\n    const selectedSongs = this.state.favorites.filter(song => song.selected);\n    const deletes = selectedSongs.map(song => {\n      axios\n        .delete(`/api/tabs/${song._id}`)\n        .then(response => {\n          console.log(response);\n        })\n        .catch(err => {\n          console.log(err);\n        });\n    });\n    Promise.all(deletes)\n    .then(response => console.log(response))\n    .then(this.state)\n\n    // Promise.all(deletes)\n    // .then(response => response.map(res => res.favorites))\n    // .then(this.favorites)\n}\n\n\n  componentDidMount() {\n    this._handleFavoritesData()\n      .then(favorites =>\n        this.setState({\n          loading: false,\n          err: null,\n          favorites\n        })\n      )\n      .catch(err =>\n        this.setState({\n          err\n        })\n      );\n  }\n  render() {\n    const props = {\n      ...this.state,\n      handleChecked: this.handleChecked,\n      deleteFavorite: this.deleteFavorite,\n      addToFavorites: this.addToFavorites\n    };\n    return (\n      <FavoritesContext.Provider value={props}>\n        {this.props.children}\n      </FavoritesContext.Provider>\n    );\n  }\n}\n\nexport const withFavoritesContext = Comp => props => (\n  <FavoritesContext.Consumer>\n    {value => <Comp {...value} {...props} />}\n  </FavoritesContext.Consumer>\n);\n"]},"metadata":{},"sourceType":"module"}