{"ast":null,"code":"import _objectSpread from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Favorites.js\";\nimport React, { Component, createContext } from 'react';\nimport axios from \"axios\";\nexport var FavoritesContext = createContext();\nvar favoritesUrl = \"/api/tabs\";\n\nvar Favorites =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Favorites, _Component);\n\n  function Favorites() {\n    var _this;\n\n    _classCallCheck(this, Favorites);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Favorites).call(this));\n    _this.state = {\n      loading: true,\n      err: null,\n      favorites: []\n    };\n    _this.handleChecked = _this.handleChecked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.deleteFavorite = _this.deleteFavorite.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Favorites, [{\n    key: \"_getFavoritesData\",\n    value: function _getFavoritesData(url) {\n      return axios.get(url).then(function (response) {\n        return response.data;\n      });\n    }\n  }, {\n    key: \"_handleFavoritesData\",\n    value: function _handleFavoritesData() {\n      return this._getFavoritesData(favoritesUrl).then(function (favorites) {\n        return _toConsumableArray(favorites);\n      });\n    }\n  }, {\n    key: \"handleChecked\",\n    value: function handleChecked(id) {\n      var _this2 = this;\n\n      return function (e) {\n        _this2.setState(function (_ref) {\n          var favorites = _ref.favorites;\n          return {\n            favorites: favorites.map(function (song) {\n              return song._id == id ? _objectSpread({}, song, {\n                selected: !song.selected\n              }) : song;\n            })\n          };\n        });\n      };\n    }\n  }, {\n    key: \"deleteFavorite\",\n    value: function deleteFavorite() {\n      var selectedSongs = this.state.favorites.filter(function (song) {\n        return song.selected;\n      });\n      var deletes = selectedSongs.map(function (song) {\n        axios.delete(\"/api/tabs/\".concat(song._id)).then(function (response) {\n          console.log(response);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      });\n      Promise.all(deletes).then(function (response) {\n        return console.log(response);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this._handleFavoritesData().then(function (favorites) {\n        return _this3.setState({\n          loading: false,\n          err: null,\n          favorites: favorites\n        });\n      }).catch(function (err) {\n        return _this3.setState({\n          err: err\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var props = _objectSpread({}, this.state, {\n        handleChecked: this.handleChecked,\n        deleteFavorite: this.deleteFavorite\n      });\n\n      return React.createElement(FavoritesContext.Provider, {\n        value: props,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return Favorites;\n}(Component);\n\nexport { Favorites as default };\nexport var withFavoritesContext = function withFavoritesContext(Comp) {\n  return function (props) {\n    return React.createElement(FavoritesContext.Consumer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, function (value) {\n      return React.createElement(Comp, Object.assign({}, value, props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }));\n    });\n  };\n};","map":{"version":3,"sources":["/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Favorites.js"],"names":["React","Component","createContext","axios","FavoritesContext","favoritesUrl","Favorites","state","loading","err","favorites","handleChecked","bind","deleteFavorite","url","get","then","response","data","_getFavoritesData","id","e","setState","map","song","_id","selected","selectedSongs","filter","deletes","delete","console","log","catch","Promise","all","_handleFavoritesData","props","children","withFavoritesContext","Comp","value"],"mappings":"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","sourcesContent":["import React, { Component, createContext } from 'react'\nimport axios from \"axios\"\n\n\nexport const FavoritesContext = createContext();\nconst favoritesUrl = \"/api/tabs\"\n\nexport default class Favorites extends Component {\n    constructor() {\n        super();\n        this.state = {\n            loading: true,\n            err: null,\n            favorites: [],\n        }\n        this.handleChecked = this.handleChecked.bind(this)\n        this.deleteFavorite = this.deleteFavorite.bind(this)\n    }\n\n    _getFavoritesData(url) {\n        return axios.get(url).then(response => response.data)\n    }\n    _handleFavoritesData() {\n        return this._getFavoritesData(favoritesUrl)\n            .then(favorites => (\n                [\n                   ...favorites\n                ]\n            ))\n    }\n    handleChecked(id) {\n        return e => {\n          this.setState(({ favorites }) => ({\n            favorites: favorites.map(\n              song => (song._id == id ? { ...song, selected: !song.selected } : song)\n            )\n          }));\n        };\n      }\n    deleteFavorite() {\n        const selectedSongs = this.state.favorites.filter(song => song.selected);\n        const deletes = selectedSongs.map(song => {\n          axios\n            .delete(`/api/tabs/${song._id}`)\n            .then(response => {\n              console.log(response);\n            })\n            .catch(err => {\n              console.log(err);\n            });\n        });\n        Promise.all(deletes).then(response => console.log(response));\n      }\n \n    componentDidMount() {\n        this._handleFavoritesData()\n        .then(favorites => this.setState ({\n            loading: false,\n            err: null,\n            favorites\n        }))\n        .catch(err => this.setState ({\n            err\n        }))\n    }\n    render() {\n        const props = {\n            ...this.state,\n            handleChecked:this.handleChecked,\n            deleteFavorite:this.deleteFavorite\n        }\n        return (\n            <FavoritesContext.Provider value={props}>\n                {this.props.children}\n            </FavoritesContext.Provider>\n        )\n    }\n}\n\nexport const withFavoritesContext = Comp => props => (\n    <FavoritesContext.Consumer>\n        {value => <Comp {...value} {...props} />}\n    </FavoritesContext.Consumer>\n)\n"]},"metadata":{},"sourceType":"module"}