{"ast":null,"code":"import _objectSpread from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Search.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Header from \"./Header\";\nimport Idle from \"./Idle\";\nimport Loading from \"./Loading\";\nimport Error from \"./Error\";\nvar tabUrl = \"https://vschool-cors.herokuapp.com?url=http://www.songsterr.com/a/ra/songs.json?pattern=\";\n\nvar Search =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Search, _Component);\n\n  function Search() {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this));\n    _this.state = {\n      data: [],\n      loading: true,\n      idle: true,\n      err: null,\n      alert: null,\n      input: \"\"\n    };\n    _this.handleResults = _this.handleResults.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChecked = _this.handleChecked.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleFavorites = _this.handleFavorites.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"handleChange\",\n    value: function handleChange(_ref) {\n      var target = _ref.target;\n      this.setState({\n        input: target.value\n      });\n    }\n  }, {\n    key: \"handleChecked\",\n    value: function handleChecked(id) {\n      var _this2 = this;\n\n      return function (e) {\n        _this2.setState(function (_ref2) {\n          var data = _ref2.data;\n          return {\n            data: data.map(function (song) {\n              return song.id == id ? _objectSpread({}, song, {\n                selected: !song.selected\n              }) : song;\n            })\n          };\n        });\n      };\n    }\n  }, {\n    key: \"handleResults\",\n    value: function handleResults(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n      this.setState({\n        idle: false,\n        loading: true\n      });\n      axios.get(tabUrl + this.state.input).then(function (response) {\n        if (response.data.length > 0) {\n          _this3.setState({\n            alert: false\n          });\n        } else {\n          _this3.setState({\n            alert: true\n          });\n        }\n\n        _this3.setState({\n          data: response.data,\n          loading: false,\n          err: null\n        });\n      }).catch(function (err) {\n        _this3.setState({\n          data: null,\n          loading: false,\n          err: {\n            message: \"404, data not found\"\n          }\n        });\n      });\n    }\n  }, {\n    key: \"handleFavorites\",\n    value: function handleFavorites(e) {\n      // filter songs by selected\n      // use Promise.all to make a bunch of individual post requests\n      var selectedSongs = this.state.data.filter(function (song) {\n        return song.selected;\n      });\n      var posts = selectedSongs.map(function (song) {\n        return axios.post(\"/api/tabs\", {\n          id: song.id,\n          title: song.title,\n          artist: song.artist.name,\n          link: \"http://www.songsterr.com/a/wa/song?id=\".concat(song.id)\n        });\n      });\n      Promise.all(posts).then(function (response) {\n        return console.log(response);\n      }); // axios\n      // .post(\"/api/tabs\", this.state)\n      // .then(response => alert(\"Tabs have been added to your favorites\"))\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          idle = _this$state.idle,\n          loading = _this$state.loading,\n          err = _this$state.err,\n          data = _this$state.data;\n      var tabList = this.state.data.map(function (item) {\n        return React.createElement(\"div\", {\n          key: item.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          onChange: _this4.handleChecked(item.id),\n          value: item.selected,\n          type: \"checkbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }), React.createElement(\"a\", {\n          href: \"http://www.songsterr.com/a/wa/song?id=\".concat(item.id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, item.title));\n      });\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleResults,\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onSubmit: this.handleResults,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Search\"), React.createElement(\"input\", {\n        onChange: this.handleChange,\n        value: this.state.input,\n        type: \"text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      })), React.createElement(Idle, {\n        idle: idle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(Loading, {\n        loading: loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Error, {\n        err: err,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"results-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"favorite-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleFavorites,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"+ to Favorites\")), React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.state.alert ? \"You're search returned no results\" : tabList))))));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport { Search as default };","map":{"version":3,"sources":["/Users/wadicals73/dev/assignments/projects/pick-it-2.0/client/src/Search.js"],"names":["React","Component","axios","Header","Idle","Loading","Error","tabUrl","Search","state","data","loading","idle","err","alert","input","handleResults","bind","handleChange","handleChecked","handleFavorites","target","setState","value","id","e","map","song","selected","preventDefault","get","then","response","length","catch","message","selectedSongs","filter","posts","post","title","artist","name","link","Promise","all","console","log","tabList","item"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Header from \"./Header\";\nimport Idle from \"./Idle\";\nimport Loading from \"./Loading\";\nimport Error from \"./Error\";\n\nconst tabUrl = `https://vschool-cors.herokuapp.com?url=http://www.songsterr.com/a/ra/songs.json?pattern=`;\n\nexport default class Search extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: [],\n      loading: true,\n      idle: true,\n      err: null,\n      alert: null,\n      input: \"\"\n    };\n    this.handleResults = this.handleResults.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChecked = this.handleChecked.bind(this);\n    this.handleFavorites = this.handleFavorites.bind(this);\n  }\n  handleChange({ target }) {\n    this.setState({ input: target.value });\n  }\n  handleChecked(id) {\n    return e => {\n      this.setState(({ data }) => ({\n        data: data.map(\n          song => (song.id == id ? { ...song, selected: !song.selected } : song)\n        )\n      }));\n    };\n  }\n  handleResults(e) {\n    e.preventDefault();\n    this.setState({ idle: false, loading: true });\n    axios\n      .get(tabUrl + this.state.input)\n      .then(response => {\n        if (response.data.length > 0) {\n          this.setState({\n            alert: false\n          });\n        } else {\n          this.setState({\n            alert: true\n          });\n        }\n        this.setState({\n          data: response.data,\n          loading: false,\n          err: null\n        });\n      })\n      .catch(err => {\n        this.setState({\n          data: null,\n          loading: false,\n          err: { message: \"404, data not found\" }\n        });\n      });\n  }\n  handleFavorites(e) {\n    // filter songs by selected\n    // use Promise.all to make a bunch of individual post requests\n    const selectedSongs = this.state.data.filter(song => song.selected);\n    const posts = selectedSongs.map(song =>\n      axios.post(\"/api/tabs\", {\n        id: song.id,\n        title: song.title,\n        artist: song.artist.name,\n        link: `http://www.songsterr.com/a/wa/song?id=${song.id}`\n      })\n    );\n    Promise.all(posts).then(response => console.log(response));\n    // axios\n    // .post(\"/api/tabs\", this.state)\n    // .then(response => alert(\"Tabs have been added to your favorites\"))\n  }\n  render() {\n    const { idle, loading, err, data } = this.state;\n    const tabList = this.state.data.map(item => (\n      <div key={item.id}>\n        <input\n          onChange={this.handleChecked(item.id)}\n          value={item.selected}\n          type=\"checkbox\"\n        />\n        <a href={`http://www.songsterr.com/a/wa/song?id=${item.id}`}>\n          {item.title}\n        </a>\n      </div>\n    ));\n    return (\n      <div>\n        <form onSubmit={this.handleResults} type=\"submit\">\n          <button onSubmit={this.handleResults}>Search</button>\n          <input\n            onChange={this.handleChange}\n            value={this.state.input}\n            type=\"text\"\n          />\n        </form>\n        <Idle idle={idle}>\n          <Loading loading={loading}>\n            <Error err={err}>\n              <div className=\"results-wrapper\">\n                <div className=\"favorite-button\">\n                  <button onClick={this.handleFavorites}>+ to Favorites</button>\n                </div>\n                <ul>\n                  {this.state.alert\n                    ? \"You're search returned no results\"\n                    : tabList}\n                </ul>\n              </div>\n            </Error>\n          </Loading>\n        </Idle>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}